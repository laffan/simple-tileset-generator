<!DOCTYPE html>
<html>

<head>
  <title>Simple Tileset Generator</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <header>
    <h1>Simple Tileset Generator</h1>
    <div class="header-tile-size">
      <label for="sizeInput">Tile Size</label>
      <input type="number" id="sizeInput" placeholder="Size" value="50" />
    </div>
  </header>

  <div class="Columns">
    <div class="Column__Left">

      <div>

        <h3>Shapes
          <div class="shapeToggle">
            <a href="#" id="selectAllShapes">all</a> | <a href="#" id="deselectAllShapes">none</a>
          </div>
        </h3>

        <div id="shapeSelection">
        </div>
      </div>

      <br />


    </div>

    <div class="Column__Right">

      <h3 class="previewHeader">
        <span>Preview</span>
        <label class="fitCheckboxLabel">
          <input type="checkbox" id="fitPreview"> Fit
        </label>
      </h3>
      <div class="PreviewBox" id="previewBox">
        <canvas id="canvas"></canvas>
      </div>


      <div class="selected-colors-section">
        <h3>Selected Colors</h3>
        <small>Check out <a href="https://observablehq.com/@makio135/give-me-colors" target="_blank">Give Me Colors</a>
          for some great palettes. Copy/pasting in the whole array should work!</small>
        <br />
        <textarea id="colorInput" placeholder="Selected colors">FFFFFF, 000000, </textarea>
        <small>Click color to remove</small>
        <div id="colorsPreviewContainer"></div>
      </div>

      <h3>Add Colors</h3>

      <!-- Color picker tabs -->
      <div class="color-tabs">
        <button class="color-tab active" data-tab="swatches">Swatches</button>
        <button class="color-tab" data-tab="wheel">Wheel</button>
      </div>

      <!-- Swatches tab content -->
      <div class="color-tab-content active" id="swatches-tab">
        <div class="complexity_slider_wrapper">
          <input type="range" id="paletteComplexity" min="14" max="128" value="40" class="complexity-slider">
        </div>
        <div id="paletteContainer">
          <div class="palette" id="colorPalette"></div>
        </div>
      </div>

      <!-- Wheel tab content -->
      <div class="color-tab-content" id="wheel-tab">
        <div class="color-wheel-container">
          <div class="wheel-sliders">
            <div class="wheel-slider-row">
              <label>Hue</label>
              <input type="range" id="hueSlider" min="0" max="360" value="0" class="hue-slider">
            </div>
            <div class="wheel-slider-row">
              <label>Opacity</label>
              <input type="range" id="opacitySlider" min="0" max="100" value="100" class="opacity-slider">
            </div>
          </div>
          <div class="color-field-wrapper">
            <canvas id="colorFieldCanvas" width="200" height="150"></canvas>
            <div class="color-field-cursor" id="colorFieldCursor"></div>
          </div>
          <div class="wheel-preview-row">
            <div class="wheel-color-preview" id="wheelColorPreview"></div>
            <button class="wheel-add-btn" id="wheelAddBtn">Add Color</button>
          </div>
        </div>
      </div>

    </div>
  </div>
  <footer>
    <div class="footer__left">
      <button id="saveSessionBtn" class="sessionBtn">Save Session</button>
      <button id="loadSessionBtn" class="sessionBtn">Load Session</button>
      <input type="file" id="loadSessionInput" accept=".json">
    </div>
    <div class="footer__right">
      <button id="downloadBtn">Download Tileset!</button>
    </div>
  </footer>

  <!-- Shape Editor Modal -->
  <div id="shapeEditorModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Edit Shape</h3>
        <button id="closeEditorBtn" class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="editor-workspace">
          <div class="shape-toolbar">
            <div class="toolbar-tool" data-tool="reflect">
              <span class="tool-icon">&lt;|&gt;</span>
              <span class="tool-label">Reflect</span>
              <div class="tool-submenu">
                <button class="tool-action" data-action="reflect-horizontal">&lt;|&gt; Horizontal</button>
                <button class="tool-action" data-action="reflect-vertical">--- Vertical</button>
              </div>
            </div>
            <div class="toolbar-tool" data-tool="align">
              <span class="tool-icon">[#]</span>
              <span class="tool-label">Align</span>
              <div class="tool-submenu align-submenu">
                <small class="submenu-hint">Shift+click paths to multi-select</small>
                <button class="tool-action" data-action="align-center">[+] Center</button>
                <button class="tool-action" data-action="align-top">Top</button>
                <button class="tool-action" data-action="align-bottom">Bottom</button>
                <button class="tool-action" data-action="align-left">Left</button>
                <button class="tool-action" data-action="align-right">Right</button>
              </div>
            </div>
            <div class="toolbar-tool" data-tool="cut">
              <span class="tool-icon">/\\</span>
              <span class="tool-label">Cut</span>
              <div class="tool-submenu">
                <button class="tool-action" data-action="boolean-cut">Boolean Cut</button>
              </div>
            </div>
          </div>
          <div id="shapeEditorCanvas"></div>
        </div>
        <div class="editor-instructions">
          <small>CMD shows resize/rotate handles. Shift+drag constrains axis. Shift+resize locks aspect ratio. Shift+rotate snaps 45Â°. Option+drag duplicates. Shift+click multi-select. Click edge to add point.</small>
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancelEditorBtn" class="sessionBtn">Cancel</button>
        <button id="saveShapeBtn" class="editor-save-btn">Save Shape</button>
      </div>
    </div>
  </div>

  <!-- Scripts loaded in dependency order -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/two.js/0.8.10/two.min.js"></script>
  <script src="scripts/config.js"></script>

  <!-- Shape registry and individual shape renderers -->
  <script src="scripts/shapes/registry.js"></script>
  <script src="scripts/shapes/square.js"></script>
  <script src="scripts/shapes/circle.js"></script>
  <script src="scripts/shapes/triangle.js"></script>
  <script src="scripts/shapes/diamond.js"></script>
  <script src="scripts/shapes/topTriangle.js"></script>
  <script src="scripts/shapes/bottomTriangle.js"></script>
  <script src="scripts/shapes/leftTriangle.js"></script>
  <script src="scripts/shapes/rightTriangle.js"></script>
  <script src="scripts/shapes/angleTopLeft.js"></script>
  <script src="scripts/shapes/angleTopRight.js"></script>
  <script src="scripts/shapes/angleBottomLeft.js"></script>
  <script src="scripts/shapes/angleBottomRight.js"></script>
  <script src="scripts/shapes/halfCircleBottom.js"></script>
  <script src="scripts/shapes/halfCircleTop.js"></script>
  <script src="scripts/shapes/halfCircleLeft.js"></script>
  <script src="scripts/shapes/halfCircleRight.js"></script>
  <script src="scripts/shapes/quarterCircleTopLeft.js"></script>
  <script src="scripts/shapes/quarterCircleTopRight.js"></script>
  <script src="scripts/shapes/quarterCircleBottomLeft.js"></script>
  <script src="scripts/shapes/quarterCircleBottomRight.js"></script>
  <script src="scripts/shapes/smallCircle.js"></script>
  <script src="scripts/shapes/donut.js"></script>
  <script src="scripts/shapes/bigDots.js"></script>
  <script src="scripts/shapes/smallDots.js"></script>
  <script src="scripts/shapes/lineUp.js"></script>
  <script src="scripts/shapes/lineAcross.js"></script>
  <script src="scripts/shapes/waves.js"></script>
  <script src="scripts/shapes/spikes.js"></script>

  <!-- Core application scripts -->
  <script src="scripts/shapeData.js"></script>
  <script src="scripts/shapes.js"></script>
  <script src="scripts/canvas.js"></script>
  <script src="scripts/colors.js"></script>
  <script src="scripts/utils.js"></script>

  <!-- Editor function modules (loaded in dependency order) -->
  <script src="scripts/editorFunctions/state.js"></script>
  <script src="scripts/editorFunctions/coordinates.js"></script>
  <script src="scripts/editorFunctions/grid.js"></script>
  <script src="scripts/editorFunctions/pathManagement.js"></script>
  <script src="scripts/editorFunctions/anchorManagement.js"></script>
  <script src="scripts/editorFunctions/pointOperations.js"></script>
  <script src="scripts/editorFunctions/pathNavigation.js"></script>
  <script src="scripts/editorFunctions/eventHandlers.js"></script>
  <script src="scripts/editorFunctions/shapeToolbar.js"></script>
  <script src="scripts/editorFunctions/modalManager.js"></script>
  <script src="scripts/editor.js"></script>

  <script src="scripts/main.js"></script>
  <script src="scripts/session.js"></script>

</body>

</html>
